# vscode-zenml

The ZenML VSCode extension seamlessly integrates with the ZenML CLI to enhance your MLOps workflow within VSCode. It is designed to accurately mirror the current state of your ZenML environment within your IDE, ensuring a smooth and integrated experience.

## Current Features

- **Activity Bar View**: The Activity Bar view features 'Server', 'Stacks' and 'Pipeline Runs' view containers, making it easier to monitor and interact with ML stacks, pipeline runs, and server configurations directly from VSCode.
- **Python Tool (LSP Server) Integration:** Encapsulates all Python logic for ZenML library interactions and real-time configuration synchronization.
- **Real-Time Configuration Monitoring with Watchdog:** Integrates the `watchdog` library to monitor `config.yaml` for any changes. This enables the extension to dynamically update its configuration in real time and remain synchronized with the user's ZenML environment.
- **Status Bar:** The status bar displays the currently active stack name and connection status with dynamic icons.
- **Supported Server Commands:**
  - `connectServer`: Establishes a connection to the ZenML server (cloud or self-hosted).
  - `disconnectServer`: Disconnects from the currently connected ZenML server. Also checks if user is connected to a local zen server and removes it.
  - `refreshServerStatus`: Refreshes and updates the server status in the IDE.
- **Supported Stack Commands:**
  - `refreshStackView`: Updates the stack view to reflect the latest state.
  - `refreshActiveStack`: Refreshes the details of the currently active stack.
  - `renameStack`: Allows renaming of an existing stack.
  - `copyStack`: Enables duplication of stack configurations.
  - `setActiveStack`: Sets a specific stack as the active stack for the project.
- **Supported Pipeline Commands**:
  - `refreshPipelineView`: Refreshes the pipeline view to display the current pipeline runs.
  - `deletePipelineRun`: Removes a specified pipeline run from the view and system.

## Limitations

- **File Watcher Lifecycle Management:** Properly initiate and terminate the file watcher with the extension's activation and deactivation to prevent resource leaks and maintain performance.
- **Minimum ZenML Version Requirement:** The extension has been tested and confirmed to work seamlessly from version 0.55.2 up to the latest release. However, compatibility with versions earlier than 0.55.2 has not been tested and cannot be guaranteed for now. The minimum version is hardcoded in the `zenml_language_server.py` file.

## Quick Start Guide

This guide is designed to get you up and running quickly with the basics of the extension and how to contribute effectively.

1. **Fork the Repository**: Start by forking the [zenml-io/vscode-zenml repository](https://github.com/zenml-io/vscode-zenml) to your own GitHub account.
2. **Clone the Forked Repository**:
   ```bash
   git clone https://github.com/your-username/vscode-zenml.git
   ```
3. **Install Dependencies**:
   ```bash
   cd vscode-zenml
   npm install
   ```

### Set Up the Python Environment

As outlined in [vscode-python-tools-extension-template](https://github.com/microsoft/vscode-python-tools-extension-template?tab=readme-ov-file#getting-started), follow these steps to set up the Python environment for the extension:

1. Create and activate a Python virtual environment for this project in a terminal. Ensure you are using Python 3.8 or greater:

2. Install `nox` within the activated environment:

```bash
python -m pip install nox
```

3. Initialize your environment with `nox`:

```sh
nox --session setup
```

4. Install dependencies from the `requirements.txt` generated by the previous step:

```sh
pip install -r requirements.txt
```

### Usage

- Activate the extension by opening a project with ZenML configurations.
- Utilize the new LSP-driven commands and features from the Activity Bar or through the VS Code command palette.

### Development

- Explore the folder structure to find essential files such as `package.json`, which includes extension metadata and the mapping of commands that appear in the command palette, and `src/extension.ts` for the main logic.
- You can install recommended extensions like `amodio.tsl-problem-matcher`, `ms-vscode.extension-test-runner`, and `dbaeumer.vscode-eslint` for an optimized development experience.
- Press `F5` to open a new window with your extension loaded. Use the command palette (`Ctrl+Shift+P` or `Cmd+Shift+P`) to run your commands.

### Running and Writing Tests

- Install the [Extension Test Runner](https://marketplace.visualstudio.com/items?itemName=ms-vscode.extension-test-runner)
- Before running any tests, start the "watch" task. This can be done by opening the command palette (`Ctrl+Shift+P` or `Cmd+Shift+P` on Mac) and selecting **Tasks: Run Task**. Choose the "watch" task to ensure your tests are continuously monitored and updated as you develop.
- Access the Testing view by clicking on the flask icon in the activity bar or using the hotkey `Ctrl/Cmd + Shift + T`. Within this view, you can initiate your tests by clicking the "Run All Tests" button.
- The outcomes of your tests will be displayed in the Test Results view.
- Make changes to `src/test/extension.test.ts` or create new test files inside the `test` folder.
- The provided test runner will only consider files matching the name pattern `**.test.ts`.
- You can create folders inside the `test` folder to structure your tests any way you want.

### Contributing

- Make changes and test them by reloading the extension window or re-launching from the debug toolbar.
- Explore the VS Code API in `node_modules/@types/vscode/index.d.ts` to understand more about what you can do.
- Run and write tests. Ensure the "watch" task is running for continuous test feedback.

### Pull Requests

Contribute back by following our [contribution guidelines](https://github.com/zenml-io/zenml/blob/main/CONTRIBUTING.md).
